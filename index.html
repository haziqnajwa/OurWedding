<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wedding Invitation</title>
<link rel="stylesheet" href="style.css">

<link rel="preload" as="image" href="opening.webp">
<link rel="preload" as="video" href="opening.webm" type="video/webm">
<link rel="preload" as="image" href="card_bg.webp">
</head>

<body class="locked">

<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<button id="musicToggle" class="musicBtn">ðŸ”Š</button>

<!-- OPENING -->
<section id="openingSection" class="openingSection">
  <div class="openingWrap">

    <div id="openingCover">
      <img src="opening.webp" class="openingImg" alt="Opening">
      <button id="openHit" class="openHit">
        <span class="tapText">Tap seal to open</span>
      </button>
    </div>

    <video id="openingVideo" class="openingVideo hidden" playsinline>
      <source src="opening.webm" type="video/webm">
    </video>

  </div>
</section>

<!-- MAIN CONTENT -->
<main id="mainContent" class="content lockedContent">

<!-- CARD SECTION -->
<section class="imgSection">
  <img src="card_bg.webp" class="sectionImg">
  <div class="overlay">

    <div class="flipWrap" id="flipWrap">
      <div class="flipper" id="flipper">
        <div class="front">
          <img src="card_front.webp">
        </div>
        <div class="back">
          <img src="card_back.webp">
        </div>
      </div>
    </div>

  </div>
</section>

<!-- RSVP -->
<section class="imgSection">
  <img src="rsvp.webp" class="sectionImg">
  <div class="overlay rsvpOverlay">
    <a href="https://maps.app.goo.gl/dcHFg6xttDfwuXhg6" target="_blank" class="rsvpBtn">Google Map</a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfBWe5IBelfTU7LKJhVfb5zdgDtQ7D1xK-jmd0pqqEJ1QBq4A/viewform" target="_blank" class="rsvpBtn">RSVP</a>
  </div>
</section>

<!-- COUNTDOWN -->
<section class="imgSection">
  <img src="countdown.webp" class="sectionImg">
  <div class="overlay countdownOverlay">
    <div id="countdown"></div>
  </div>
</section>

<!-- GALLERY -->
<section class="imgSection">
  <img src="gallery.webp" class="sectionImg">
  <div class="overlay galleryOverlay">
    <div class="galleryViewport">
      <div class="galleryTrack" id="galleryTrack">
        <img src="gallery1.webp">
        <img src="gallery2.webp">
        <img src="gallery3.webp">
        <img src="gallery4.webp">
      </div>
    </div>
  </div>
</section>

<!-- DOA -->
<section class="imgSection">
  <img src="doa_bg.webp" class="sectionImg">
  <div class="overlay doaOverlay">
    <div id="doaText">
      <p class="line">(30:21) And of His signs is that He created for you from yourselves mates that you may find tranquility in them;</p>
      <p class="line">and He placed between you affection and mercy. Verily in that are signs for those who reflect</p>
      <p class="line">(7:189) It is He who created you from one soul and created from it its mate that he might dwell in security with her.</p>
      <p class="line">And when he covers her, she carries a light burden and continues therein.</p>
      <p class="line">And when it becomes heavy, they both invoke Allah...</p>
    </div>
  </div>
</section>

</main>

<script>
const body = document.body;
const openHit = document.getElementById("openHit");
const openingVideo = document.getElementById("openingVideo");
const openingCover = document.getElementById("openingCover");
const openingSection = document.getElementById("openingSection");
const mainContent = document.getElementById("mainContent");
const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicToggle");

openHit.onclick = async () => {
  openingCover.classList.add("hidden");
  openingVideo.classList.remove("hidden");
  await music.play().catch(()=>{});
  openingVideo.play();
};

openingVideo.onended = () => {
  openingSection.style.display = "none";
  body.classList.remove("locked");
  mainContent.classList.remove("lockedContent");
};

musicBtn.onclick = () => {
  if(music.paused){ music.play(); musicBtn.textContent="ðŸ”Š"; }
  else{ music.pause(); musicBtn.textContent="ðŸ”‡"; }
};

/* Flip */
document.getElementById("flipWrap").onclick=()=>{
  document.getElementById("flipper").classList.toggle("flip");
};

/* Countdown */
const eventDate=new Date("2026-05-02T11:00:00+08:00");
setInterval(()=>{
  const now=new Date();
  const diff=eventDate-now;
  if(diff<0){document.getElementById("countdown").innerText="It's today!";return;}
  const d=Math.floor(diff/86400000);
  const h=Math.floor(diff%86400000/3600000);
  const m=Math.floor(diff%3600000/60000);
  const s=Math.floor(diff%60000/1000);
  document.getElementById("countdown").innerText=`${d}d ${h}h ${m}m ${s}s`;
},1000);

/* Gallery swipe */
const track=document.getElementById("galleryTrack");
let index=0;
document.querySelector(".galleryViewport").addEventListener("click",()=>{
  index=(index+1)%4;
  track.style.transform=`translateX(-${index*100}%)`;
});

/* Doa appear */
const lines=document.querySelectorAll(".line");
const io=new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.classList.add("show");
    }
  });
},{threshold:0.5});
lines.forEach(line=>io.observe(line));
</script>

</body>
</html>

/* style.css (UPDATED: gallery swipe friendliness + royal sparkle overlay retained) */
*{margin:0;padding:0;box-sizing:border-box}

:root{
  --pageW:1240;
  --pageH:1748;

  --vpad:18px;
  --radius:22px;

  /* ✅ UPDATED (pixel-perfect to card_bg.webp paper area) */
  --slot-left:6.77%;
  --slot-top:4.75%;
  --slot-width:86.94%;
  --slot-height:91.76%;

  --doa-left:22%;
  --doa-top:14.5%;
  --doa-width:56%;
  --doa-height:27%;

  --rsvp-left:18%;
  --rsvp-width:64%;
  --rsvp-top1:48%;
  --rsvp-top2:57.5%;
  --rsvp-height:5.5%;

  --countdown-top:33%;
  --countdown-left:8%;
  --countdown-width:84%;
}

html,body{height:100%}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  overflow:hidden;
  background:#260707;
  color:#fff;
}

.slides{
  height:100vh;
  overflow-y:auto;
  scroll-snap-type:y mandatory;
  scroll-behavior:smooth;
}

.slide{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  scroll-snap-align:start;
  position:relative;
}

.stage{
  width:min(92vw, calc(var(--pageW)*1px));
  height:calc(100vh - (var(--vpad)*2));
  max-height:calc(var(--pageH)*1px);
  aspect-ratio: var(--pageW) / var(--pageH);
  border-radius:var(--radius);
  overflow:hidden;
  position:relative;
  box-shadow:0 30px 60px rgba(0,0,0,.55);
  background:#000;
}

/* media fits inside each stage */
.stageMedia{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
}

/* Vignette for cinematic feel */
.stage::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(120% 120% at 50% 35%,
      rgba(255,255,255,0.06) 0%,
      rgba(0,0,0,0.00) 40%,
      rgba(0,0,0,0.35) 78%,
      rgba(0,0,0,0.62) 100%);
  mix-blend-mode:overlay;
  z-index:2;
}

/* Royal sparkle overlay (global) */
.stage::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:3;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.95) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.8) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.6) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.5) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.4) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.35) 0 1px, transparent 2px);
  background-size:
    220px 220px,
    280px 280px,
    340px 340px,
    420px 420px,
    520px 520px,
    680px 680px;
  background-position:
    10% 20%,
    70% 10%,
    40% 65%,
    85% 55%,
    20% 80%,
    60% 90%;
  opacity:.55;
  filter: blur(.4px);
  animation: sparkleBlink 1.7s infinite ease-in-out, sparkleFloat 9s infinite ease-in-out;
  mix-blend-mode: screen;
}

@keyframes sparkleBlink{
  0%,100%{opacity:.35}
  50%{opacity:.75}
}

@keyframes sparkleFloat{
  0%{transform:translate3d(0,0,0)}
  50%{transform:translate3d(-8px, -14px, 0)}
  100%{transform:translate3d(0,0,0)}
}

@media (prefers-reduced-motion: reduce){
  .stage::after{animation:none}
}

/* ---------- LOCK (prevents scroll until opened) ---------- */
.lockedContent{
  overflow:hidden;
}

/* OPENING overlay for the first slide */
#openingOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
  pointer-events:auto;
}

/* ---------- MUSIC button ---------- */
#musicBtn{
  position:fixed;
  top:14px;
  right:14px;
  z-index:100;
  width:46px;
  height:46px;
  border-radius:999px;
  border:none;
  background:rgba(255,255,255,.92);
  color:#3b0b0b;
  font-weight:900;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
}
#musicBtn:active{transform:scale(.98)}

/* ---------- OVERLAY base ---------- */
.overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:5;
}

/* ---------- CARD SLOT (Flip card) ---------- */
.cardSlot{
  position:absolute;
  left:var(--slot-left);
  top:var(--slot-top);
  width:var(--slot-width);
  height:var(--slot-height);
  perspective:1200px;
  overflow:hidden;
  pointer-events:auto;
}

.flipWrap{
  width:100%;
  height:100%;
  border:none;
  background:none;
  cursor:pointer;
  padding:0;
}

.flipCard{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .9s cubic-bezier(.2,.85,.2,1);
}

.flipCard.isFlipped{transform:rotateY(180deg)}

.flipFace{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
}

.flipBack{transform:rotateY(180deg)}

/* ✅ UPDATED: keep cover + center, tiny overscale to prevent 1px gaps */
.flipFace img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center;
  /* tiny overscale to avoid 1px gaps on some browsers */
  transform:scale(1.02);
}

/* RSVP */
.rsvpOverlay{
  position:absolute;
  left:var(--rsvp-left);
  width:var(--rsvp-width);
  top:0;
  height:100%;
  pointer-events:auto;
}

.rsvpBtn{
  position:absolute;
  left:0;
  width:100%;
  height:var(--rsvp-height);
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  font-weight:800;
  color:#5b0b0b;
  background:rgba(255,255,255,.92);
  border-radius:999px;
  box-shadow:0 15px 35px rgba(0,0,0,.3);
}

#mapLink{top:var(--rsvp-top1)}
#rsvpLink{top:var(--rsvp-top2)}

/* Countdown */
.countdownBox{
  position:absolute;
  top:var(--countdown-top);
  left:var(--countdown-left);
  width:var(--countdown-width);
  display:flex;
  justify-content:space-between;
  gap:10px;
  pointer-events:none;
}

.cdItem{
  flex:1;
  text-align:center;
  padding:10px 0;
}

.cdNum{
  font-size:clamp(24px, 4vw, 50px);
  font-weight:900;
  letter-spacing:.05em;
  text-shadow:0 10px 25px rgba(0,0,0,.35);
}

.cdLbl{
  margin-top:3px;
  font-size:clamp(10px, 1.2vw, 14px);
  opacity:.85;
  letter-spacing:.18em;
  text-transform:uppercase;
}

/* Gallery */
.galleryWrap{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:auto;
}

.galleryViewer{
  width:min(86vw, 520px);
  aspect-ratio: 3/4;
  border-radius:18px;
  overflow:hidden;
  position:relative;
  box-shadow:0 18px 45px rgba(0,0,0,.5);
  background:rgba(0,0,0,.25);
}

.galleryImg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  user-select:none;
  -webkit-user-drag:none;
}

.gNav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:44px;
  height:44px;
  border:none;
  border-radius:999px;
  background:rgba(255,255,255,.9);
  color:#3b0b0b;
  font-weight:900;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2;
}

.gPrev{left:10px}
.gNext{right:10px}
.gNav:active{transform:translateY(-50%) scale(.98)}

/* Swipe friendliness */
.galleryViewer{
  touch-action: pan-y;
}

/* Doa / Text typing */
.doaBox{
  position:absolute;
  left:var(--doa-left);
  top:var(--doa-top);
  width:var(--doa-width);
  height:var(--doa-height);
  overflow:hidden;
  pointer-events:none;
}

#doaText{
  font-size:clamp(14px, 1.5vw, 20px);
  line-height:1.55;
  color:#3b0b0b;
  text-align:center;
  white-space:pre-wrap;
  text-shadow:0 1px 0 rgba(255,255,255,.5);
  opacity:0;
  transform:translateY(8px);
  transition:opacity .8s ease, transform .8s ease;
}

#slide-doa.isActive #doaText{
  opacity:1;
  transform:translateY(0);
}

/* helpers */
.hidden{display:none !important}

/* Responsive tweaks */
@media (max-width:520px){
  :root{
    --vpad:14px;
    --radius:18px;
  }
  #musicBtn{top:10px; right:10px}
  .galleryViewer{width:min(90vw, 420px)}
}

@media (max-height:720px){
  :root{--vpad:10px}
}

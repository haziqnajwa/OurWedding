*{margin:0;padding:0;box-sizing:border-box}

:root{
  /* Page ratio used by ALL slides (your 1240x1748 images) */
  --pageW: 1240;
  --pageH: 1748;

  /* Safe padding from viewport edges */
  --vpad: 18px;

  --radius: 22px;
  --shadow: 0 20px 60px rgba(0,0,0,.22);

  /* ===== Flip card placement on card_bg.webp (tune if needed) ===== */
  --card-left: 23%;
  --card-top: 8%;
  --card-width: 40%;

  /* RSVP placement */
  --rsvp-left: 22%;
  --rsvp-top: 62%;
  --rsvp-width: 56%;

  /* Countdown placement */
  --count-left: 50%;
  --count-top: 27%;

  /* Gallery viewport placement */
  --gal-left: 14%;
  --gal-top: 15%;
  --gal-width: 72%;
  --gal-height: 70%;

  /* Doa placement */
  --doa-left: 22%;
  --doa-top: 12%;
  --doa-width: 56%;
}

body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: url("bg_red.webp") center/cover fixed no-repeat;
  overflow-x:hidden;
}

@media (max-width:768px){
  body{ background-attachment:scroll; }
}

body.locked{
  height:100vh;
  overflow:hidden;
}

.hidden{ display:none !important; }
.lockedContent{ display:none; }

/* ===== Slide snap behavior ===== */
.slides{
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
}
.slide{
  min-height: 100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--vpad);
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* ===== Shared STAGE size (THIS ensures opening + video + card align) ===== */
.stage{
  width: min(96vw, calc((100vh - (2 * var(--vpad))) * (var(--pageW) / var(--pageH))));
  aspect-ratio: var(--pageW) / var(--pageH);

  position:relative;
  border-radius: var(--radius);
  overflow:hidden;
  box-shadow: var(--shadow);
}

/* For opening section too */
.openingSection{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: var(--vpad);
}

/* All “page media” (images and the opening video) */
.stageMedia{
  width:100%;
  height:100%;
  display:block;
  object-fit: contain;
  background:#000;
}

/* Overlay always matches media exactly */
.overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* ===== Opening cover tap layer ===== */
.openingCover{ position:absolute; inset:0; }
.openHit{
  position:absolute;
  inset:0;
  border:none;
  background:transparent;
  cursor:pointer;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding:22px;
}
.tapText{
  padding:10px 16px;
  border-radius:999px;
  font-weight:900;
  color:#fff;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(8px);
}

/* ===== Music button ===== */
.musicBtn{
  position:fixed;
  right:18px;
  bottom:18px;
  width:56px;
  height:56px;
  border-radius:50%;
  border:none;
  cursor:pointer;
  background:rgba(255,255,255,.9);
  box-shadow: var(--shadow);
  z-index:50;
}

/* ===== Flip card ===== */
.flipWrap{
  pointer-events:auto;
  position:absolute;
  left: var(--card-left);
  top: var(--card-top);
  width: var(--card-width);
  perspective: 1200px;
}
.flipper{
  position:relative;
  transform-style:preserve-3d;
  transition: transform .9s cubic-bezier(.2,.85,.2,1);
  border-radius: 18px;
  overflow:hidden;
  box-shadow: 0 16px 40px rgba(0,0,0,.25);
}
.flipper.flip{ transform: rotateY(180deg); }

.front, .back{
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
}
.back{
  position:absolute;
  inset:0;
  transform: rotateY(180deg);
}
.front img, .back img{
  width:100%;
  height:auto;
  display:block;
}

/* ===== RSVP ===== */
.rsvpOverlay{
  pointer-events:auto;
  position:absolute;
  left: var(--rsvp-left);
  top: var(--rsvp-top);
  width: var(--rsvp-width);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.rsvpBtn{
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  font-weight:900;
  padding:12px 14px;
  border-radius:999px;
  background:rgba(255,255,255,.88);
  color:#3b0b0b;
  border:1px solid rgba(120,0,0,.25);
  box-shadow:0 10px 28px rgba(0,0,0,.18);
}

/* ===== Countdown ===== */
.countdownOverlay{
  position:absolute;
  left: var(--count-left);
  top: var(--count-top);
  transform: translate(-50%, -50%);
  pointer-events:none;
}
.countdownText{
  padding:12px 16px;
  border-radius:18px;
  background:rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.22);
  backdrop-filter: blur(10px);
  color:#fff;
  font-weight:900;
  font-size: clamp(16px, 3.6vw, 22px);
}

/* ===== Gallery ===== */
.galleryOverlay{
  pointer-events:auto;
  position:absolute;
  left: var(--gal-left);
  top: var(--gal-top);
  width: var(--gal-width);
  height: var(--gal-height);
  display:grid;
  grid-template-columns:44px 1fr 44px;
  align-items:center;
  gap:10px;
}
.galleryViewport{
  overflow:hidden;
  width:100%;
  height:100%;
  border-radius:18px;
  background:rgba(255,255,255,.12);
  box-shadow:0 12px 30px rgba(0,0,0,.18);
  touch-action: pan-y;
}
.galleryTrack{
  height:100%;
  display:flex;
  transition: transform .35s ease;
}
.slideImg{
  flex:0 0 100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.slideImg img{
  width:100%;
  height:100%;
  object-fit: contain;
  display:block;
}
.galleryNav{
  width:44px;
  height:44px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-size:26px;
  background:rgba(255,255,255,.75);
  box-shadow:0 10px 28px rgba(0,0,0,.18);
}

/* ===== Doa ===== */
.doaOverlay{
  position:absolute;
  left: var(--doa-left);
  top: var(--doa-top);
  width: var(--doa-width);
  pointer-events:none;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.line{
  padding:10px 12px;
  border-radius:14px;
  background:rgba(255,255,255,.78);
  box-shadow:0 10px 26px rgba(0,0,0,.12);
  font-weight:800;
  line-height:1.25;
  text-align:center;
  font-size: clamp(12px, 2.2vw, 15px);
  opacity:0;
  transform: translateY(10px);
  transition: .6s ease;
  overflow-wrap:anywhere;
}
.line.show{
  opacity:1;
  transform:none;
}

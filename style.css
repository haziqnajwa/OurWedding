/* style.css — Royal Classic Upgrade (CSS-only)
   Keeps your existing flow/JS/features intact.
   Adds: kerawang watermark, richer royal glow, classic film grain, romantic bokeh,
         gentle sheen on card flip, calmer gold dust mood for DOA, Ken Burns pan for gallery.
*/

/* ========== Base reset ========== */
*{margin:0;padding:0;box-sizing:border-box}

/* ========== Layout variables (keep yours) ========== */
:root{
  --pageW:1240;
  --pageH:1748;

  --vpad:18px;
  --radius:22px;

  --slot-left:10.7%;
  --slot-top:6.7%;
  --slot-width:79.0%;
  --slot-height:84.8%;

  --doa-left:22%;
  --doa-top:14.5%;
  --doa-width:56%;
  --doa-height:27%;

  --rsvp-left:18%;
  --rsvp-width:64%;
  --rsvp-top1:62%;
  --rsvp-top2:71%;
  --rsvp-height:8%;

  --cd-left:8%;
  --cd-top:20%;
  --cd-width:84%;
  --cd-height:18%;

  --gal-left:13%;
  --gal-top:22%;
  --gal-width:74%;
  --gal-height:52%;

  /* ===== Royal classic tuning ===== */
  --gold: 212, 175, 55;            /* antique gold (RGB) */
  --champagne: 255, 236, 210;      /* warm cream highlight */

  --vignette-strength:.50;
  --warm-glow-alpha:.18;           /* chandelier glow */
  --songket-alpha:.06;             /* weave visibility */
  --grain-alpha:.05;               /* film grain */
  --bokeh-alpha:.10;               /* bokeh layer */

  --sparkle-brightness:.92;
  --sparkle-glow:.85;

  /* Kerawang watermark */
  --kerawang-alpha:.10;            /* overall watermark visibility */
  --kerawang-scale: 720px 720px;   /* watermark size */

  /* Gallery cinematic */
  --kenburns-duration: 14s;
}

body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:url("bg_red.webp") center/cover no-repeat;
  background-attachment:scroll;
  overflow-x:hidden;
}

@media (min-width:900px){
  body{background-attachment:fixed;}
}

body.locked{
  height:100vh;
  overflow:hidden;
}

.hidden{display:none!important}
.lockedContent{display:none}

/* Slides */
.slides{scroll-snap-type:y mandatory}
.slide{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:var(--vpad);
  scroll-snap-align:start;

  content-visibility:auto;
  contain-intrinsic-size:100vh;
}

/* Stage */
.stage{
  width:min(96vw,calc((100vh - (2*var(--vpad)))*(var(--pageW)/var(--pageH))));
  aspect-ratio:var(--pageW)/var(--pageH);
  position:relative;
  border-radius:var(--radius);
  overflow:hidden;
  box-shadow:0 26px 70px rgba(0,0,0,.28);
  isolation:isolate;
}

.stageMedia{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  position:relative;
  z-index:1;
}

.overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:4;
}

/* =====================================================
   ROYAL + ROMANTIC + CLASSIC CINEMATIC LAYERS (CSS ONLY)
   ===================================================== */

/* Warm chandelier glow + songket weave + classic vignette */
.stage::before{
  content:"";
  position:absolute;
  inset:-1px;
  pointer-events:none;
  z-index:2;

  background:
    /* warm chandelier glow */
    radial-gradient(120% 90% at 50% 10%,
      rgba(var(--champagne), var(--warm-glow-alpha)) 0%,
      rgba(var(--champagne), 0.00) 55%),

    /* songket / tenun weave (very subtle) */
    repeating-linear-gradient(45deg,
      rgba(var(--gold), var(--songket-alpha)) 0 2px,
      rgba(var(--gold), 0) 2px 10px),
    repeating-linear-gradient(-45deg,
      rgba(var(--gold), calc(var(--songket-alpha) * .75)) 0 1px,
      rgba(var(--gold), 0) 1px 12px),

    /* classic vignette */
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.06) 0%,
      rgba(0,0,0,var(--vignette-strength)) 86%
    );

  mix-blend-mode:multiply;
  animation: songketDrift 28s linear infinite;
}

/* Soft bokeh depth + sparkles + film grain */
.stage::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:3;

  background:
    /* soft romantic bokeh */
    radial-gradient(circle at 18% 22%, rgba(var(--champagne), var(--bokeh-alpha)) 0 34px, transparent 120px),
    radial-gradient(circle at 78% 28%, rgba(var(--champagne), calc(var(--bokeh-alpha) * .9)) 0 28px, transparent 110px),
    radial-gradient(circle at 28% 78%, rgba(var(--champagne), calc(var(--bokeh-alpha) * .85)) 0 26px, transparent 105px),
    radial-gradient(circle at 82% 74%, rgba(var(--champagne), calc(var(--bokeh-alpha) * .8)) 0 22px, transparent 95px),

    /* sparkles (white) */
    radial-gradient(circle at 10% 20%, rgba(255,255,255,var(--sparkle-brightness)) 0 3px, transparent 6px),
    radial-gradient(circle at 25% 75%, rgba(255,255,255,var(--sparkle-brightness)) 0 2.5px, transparent 5px),
    radial-gradient(circle at 40% 30%, rgba(255,255,255,var(--sparkle-brightness)) 0 3px, transparent 6px),
    radial-gradient(circle at 55% 65%, rgba(255,255,255,var(--sparkle-brightness)) 0 2.6px, transparent 5.6px),
    radial-gradient(circle at 70% 15%, rgba(255,255,255,var(--sparkle-brightness)) 0 3.2px, transparent 6.2px),
    radial-gradient(circle at 85% 55%, rgba(255,255,255,var(--sparkle-brightness)) 0 2.6px, transparent 5.6px),
    radial-gradient(circle at 90% 82%, rgba(255,255,255,var(--sparkle-brightness)) 0 2.8px, transparent 6px),
    radial-gradient(circle at 16% 56%, rgba(255,255,255,var(--sparkle-brightness)) 0 3px, transparent 6px),

    /* film grain */
    repeating-linear-gradient(0deg,
      rgba(255,255,255,var(--grain-alpha)) 0 1px,
      rgba(0,0,0,calc(var(--grain-alpha) * .7)) 2px 3px
    );

  opacity:.62;
  filter: drop-shadow(0 0 10px rgba(255,255,255,var(--sparkle-glow)));
  mix-blend-mode:screen;
  animation:
    sparkleBlink 1.7s infinite ease-in-out,
    sparkleFloat 9s infinite ease-in-out,
    grainShift 2.6s steps(2) infinite;
}

/* Kerawang / filigree watermark (very faint, behind overlays) */
.overlay::before{
  content:"";
  position:absolute;
  inset:-2%;
  z-index:0;
  pointer-events:none;
  opacity:var(--kerawang-alpha);
  background-repeat:repeat;
  background-size:var(--kerawang-scale);
  background-position:center;
  /* Lightweight kerawang-style SVG tile (gold stroke, transparent fill) */
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Cg fill='none' stroke='rgba(212,175,55,0.45)' stroke-width='2'%3E%3Cpath d='M180 40c-28 34-42 56-42 78 0 24 18 42 42 42s42-18 42-42c0-22-14-44-42-78z'/%3E%3Cpath d='M180 320c28-34 42-56 42-78 0-24-18-42-42-42s-42 18-42 42c0 22 14 44 42 78z'/%3E%3Cpath d='M40 180c34-28 56-42 78-42 24 0 42 18 42 42s-18 42-42 42c-22 0-44-14-78-42z'/%3E%3Cpath d='M320 180c-34 28-56 42-78 42-24 0-42-18-42-42s18-42 42-42c22 0 44 14 78 42z'/%3E%3Cpath d='M95 95c22 8 41 19 56 34 17 17 17 45 0 62-17 17-45 17-62 0-15-15-26-34-34-56 10-18 22-30 40-40z'/%3E%3Cpath d='M265 265c-22-8-41-19-56-34-17-17-17-45 0-62 17-17 45-17 62 0 15 15 26 34 34 56-10 18-22 30-40 40z'/%3E%3Cpath d='M265 95c-18 10-30 22-40 40 8 22 19 41 34 56 17 17 45 17 62 0 17-17 17-45 0-62-15-15-34-26-56-34z'/%3E%3Cpath d='M95 265c18-10 30-22 40-40-8-22-19-41-34-56-17-17-45-17-62 0-17 17-17 45 0 62 15 15 34 26 56 34z'/%3E%3C/g%3E%3C/svg%3E");
  mix-blend-mode:soft-light;
}

/* make sure overlay content stays above watermark */
.overlay > *{ position:relative; z-index:1; }

@keyframes sparkleBlink{ 0%,100%{opacity:.35} 50%{opacity:.75} }
@keyframes sparkleFloat{ 0%{transform:translate3d(0,0,0)} 50%{transform:translate3d(-8px,-14px,0)} 100%{transform:translate3d(0,0,0)} }
@keyframes songketDrift{ 0%{background-position:0 0,0 0,0 0,0 0} 100%{background-position:0 0,220px 160px,-180px 220px,0 0} }
@keyframes grainShift{ 0%{transform:translate3d(0,0,0)} 50%{transform:translate3d(-1px,1px,0)} 100%{transform:translate3d(0,0,0)} }

@media (prefers-reduced-motion: reduce){
  .stage::before{animation:none}
  .stage::after{animation:none}
}

/* Opening */
.openingSection{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:var(--vpad);
}

.openHit{
  position:absolute;
  inset:0;
  border:none;
  background:transparent;
  cursor:pointer;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding:20px;
  z-index:5;
  pointer-events:auto;
}

.tapText{
  background:rgba(0,0,0,.42);
  color:#fff;
  padding:10px 18px;
  border-radius:999px;
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
  box-shadow:
    0 14px 30px rgba(0,0,0,.35),
    0 0 0 1px rgba(var(--gold), .22) inset,
    0 0 28px rgba(var(--gold), .18);
  animation: tapPulse 2.2s ease-in-out infinite;
}

@keyframes tapPulse{
  0%,100%{ transform: translateY(0); box-shadow:
    0 14px 30px rgba(0,0,0,.35),
    0 0 0 1px rgba(var(--gold), .22) inset,
    0 0 18px rgba(var(--gold), .14); }
  50%{ transform: translateY(-1px); box-shadow:
    0 18px 40px rgba(0,0,0,.38),
    0 0 0 1px rgba(var(--gold), .28) inset,
    0 0 30px rgba(var(--gold), .20); }
}

/* Music */
.musicBtn{
  position:fixed;
  right:18px;
  bottom:18px;
  width:56px;
  height:56px;
  border-radius:50%;
  border:none;
  background:#fff;
  cursor:pointer;
  z-index:50;
}

/* Card flip */
.cardSlot{
  position:absolute;
  left:var(--slot-left);
  top:var(--slot-top);
  width:var(--slot-width);
  height:var(--slot-height);
  perspective:1200px;
  overflow:hidden;
  pointer-events:auto;
}

.flipWrap{
  width:100%;
  height:100%;
  border:none;
  background:none;
  cursor:pointer;
  padding:0;
}

.flipCard{
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform .9s cubic-bezier(.2,.85,.2,1);
}

.flipCard.isFlipped{transform:rotateY(180deg)}

.flipFace{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
  overflow:hidden; /* for sheen */
}

.flipBack{transform:rotateY(180deg)}

.flipFace img{
  width:100%;
  height:100%;
  object-fit:cover;
  transform:scale(1.10);
}

/* Royal sheen sweep (visual only) */
.flipFace::after{
  content:"";
  position:absolute;
  inset:-25%;
  pointer-events:none;
  opacity:0;
  background: linear-gradient(115deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.14) 42%,
    rgba(255,255,255,.32) 50%,
    rgba(255,255,255,.12) 58%,
    rgba(255,255,255,0) 100%);
  transform: translateX(-120%) rotate(8deg);
  mix-blend-mode: screen;
}

.flipCard.isFlipped .flipFace::after,
.flipWrap:active .flipFace::after{
  opacity:1;
  animation: sheenSweep .75s ease-out 1;
}
@keyframes sheenSweep{
  from { transform: translateX(-120%) rotate(8deg); }
  to   { transform: translateX(120%) rotate(8deg); }
}

/* RSVP */
.rsvpOverlay{
  position:absolute;
  left:var(--rsvp-left);
  width:var(--rsvp-width);
  top:0;
  height:100%;
  pointer-events:auto;
}

.rsvpBtn{
  position:absolute;
  left:0;
  width:100%;
  height:var(--rsvp-height);
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  font-weight:800;
  color:#5b0b0b;
  background:rgba(255,255,255,.92);
  border-radius:999px;
  box-shadow:0 15px 35px rgba(0,0,0,.25);
  transition: transform .15s ease, box-shadow .2s ease, filter .2s ease;
}
.rsvpBtn:hover{
  filter: brightness(1.03);
  box-shadow:0 18px 42px rgba(0,0,0,.28), 0 0 0 1px rgba(var(--gold), .20) inset;
}
.rsvpBtn:active{ transform: scale(.99); }

#mapLink{top:var(--rsvp-top1)}
#rsvpLink{top:var(--rsvp-top2)}

/* Countdown */
.countdownOverlay{
  position:absolute;
  left:var(--cd-left);
  top:var(--cd-top);
  width:var(--cd-width);
  height:var(--cd-height);
  display:flex;
  align-items:flex-end;
  justify-content:center;
  pointer-events:none;
}

.countdownRow{
  width:100%;
  display:flex;
  gap:clamp(10px,2vw,22px);
  justify-content:space-between;
  align-items:flex-end;
}

.cdItem{flex:1;text-align:center}

.cdNum{
  font-weight:900;
  font-size:clamp(26px,4.2vw,56px);
  color:#fff;
  text-shadow:0 10px 25px rgba(0,0,0,.45);
}

.cdLbl{
  margin-top:6px;
  font-weight:900;
  letter-spacing:.08em;
  font-size:clamp(10px,1.2vw,14px);
  color:rgba(255,255,255,.95);
}

/* Gallery */
.galleryOverlay{
  position:absolute;
  left:0; top:0; width:100%; height:100%;
  pointer-events:auto;
}

.galleryViewport{
  position:absolute;
  left:var(--gal-left);
  top:var(--gal-top);
  width:var(--gal-width);
  height:var(--gal-height);
  overflow:hidden;
  border-radius:18px;
  box-shadow:0 18px 48px rgba(0,0,0,.28);
  background:rgba(0,0,0,.10);

  /* swipe friendliness */
  touch-action: pan-y;
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
}

/* classic photo vignette inside viewport */
.galleryViewport::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: radial-gradient(120% 120% at 50% 45%,
    rgba(255,255,255,0.05) 0%,
    rgba(0,0,0,0.00) 45%,
    rgba(0,0,0,0.35) 100%);
  mix-blend-mode: overlay;
}

#galleryImg{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:50% 50%;
  display:block;
  transform: translateZ(0);
  will-change: object-position;
}

/* Keep your existing fadeIn, but add Ken Burns “pan” as a second animation */
.fadeIn{
  animation:
    fadeIn .22s ease-out,
    kenBurnsPos var(--kenburns-duration) ease-in-out infinite alternate;
}
@keyframes fadeIn{from{opacity:.25;transform:scale(.99)}to{opacity:1;transform:scale(1)}}

/* Ken Burns via object-position (no transform conflict) */
@keyframes kenBurnsPos{
  0%   { object-position: 48% 46%; }
  100% { object-position: 52% 54%; }
}

.galleryArrow{
  position:absolute;
  top:calc(var(--gal-top) + (var(--gal-height)/2));
  transform:translateY(-50%);
  width:44px;
  height:44px;
  border:none;
  border-radius:50%;
  cursor:pointer;
  background:rgba(255,255,255,.9);
  color:#4b0b0b;
  font-size:30px;
  line-height:44px;
  text-align:center;
  box-shadow:0 15px 35px rgba(0,0,0,.25);
}

.galleryArrow.left{left:calc(var(--gal-left) - 18px)}
.galleryArrow.right{left:calc(var(--gal-left) + var(--gal-width) - 26px)}

.galleryDots{
  position:absolute;
  left:0;
  right:0;
  top:calc(var(--gal-top) + var(--gal-height) + 1.5%);
  display:flex;
  justify-content:center;
  gap:10px;
}

.dot{
  width:10px;height:10px;border-radius:50%;
  border:none;
  background:rgba(255,255,255,.6);
  cursor:pointer;
}
.dot.active{background:#fff}

/* DOA */
.doaOverlay{
  position:absolute;
  left:var(--doa-left);
  top:var(--doa-top);
  width:var(--doa-width);
  height:var(--doa-height);
  overflow:hidden;
  display:flex;
  align-items:flex-start;
  justify-content:center;
}

.doaType{
  width:100%;
  height:100%;
  white-space:pre-wrap;
  text-align:center;
  font-weight:800;
  line-height:1.35;
  color:#2b0b0b;
  font-size:14px;

  opacity:0;
  transform:translateY(10px);
}

/* JS adds .isDoaActive to the slide */
.slide.isDoaActive .doaType{
  animation:doaFadeIn .9s ease-out forwards;
}
@keyframes doaFadeIn{ to{opacity:1;transform:translateY(0);} }

/* ===== DOA: calmer “gold dust” mood (less sparkle, more sacred) ===== */
#slide-doa .stage::after{
  /* override only the visual overlay for doa slide */
  background:
    /* gold dust motes */
    radial-gradient(circle at 18% 28%, rgba(var(--gold), .22) 0 1.4px, transparent 4px),
    radial-gradient(circle at 32% 52%, rgba(var(--gold), .18) 0 1.2px, transparent 3.6px),
    radial-gradient(circle at 58% 40%, rgba(var(--gold), .20) 0 1.5px, transparent 4.2px),
    radial-gradient(circle at 74% 62%, rgba(var(--gold), .16) 0 1.2px, transparent 3.8px),
    radial-gradient(circle at 82% 30%, rgba(var(--gold), .18) 0 1.3px, transparent 4px),
    radial-gradient(circle at 46% 76%, rgba(var(--gold), .16) 0 1.2px, transparent 3.6px),

    /* soft warm hush */
    radial-gradient(120% 90% at 50% 12%,
      rgba(var(--champagne), .10) 0%,
      rgba(var(--champagne), 0.00) 55%),

    /* very subtle grain */
    repeating-linear-gradient(0deg,
      rgba(255,255,255,calc(var(--grain-alpha) * .7)) 0 1px,
      rgba(0,0,0,calc(var(--grain-alpha) * .5)) 2px 3px
    );

  opacity:.55;
  filter: drop-shadow(0 0 10px rgba(var(--gold), .20));
  mix-blend-mode: screen;
  animation: doaDustFloat 16s ease-in-out infinite, grainShift 2.6s steps(2) infinite;
}
@keyframes doaDustFloat{
  0%{ transform: translate3d(0,0,0); }
  50%{ transform: translate3d(-10px, -10px, 0); }
  100%{ transform: translate3d(0,0,0); }
}

/* Small screens */
@media (max-width:520px){
  :root{
    --vpad:12px;
    --rsvp-height:9%;
    --kerawang-scale: 560px 560px;
  }
  .galleryArrow{width:40px;height:40px;line-height:40px;font-size:28px}
}

/* ============================================
   ROYAL CARD SIGNALS (Flip + Scroll Indicators)
   CSS-only, no HTML changes
   ============================================ */

/* Make sure overlay layer can hold decorative signals */
.cardSlot{
  position:absolute;
}

/* ===============================
TAP TO FLIP (no fill, still royal/glowy) */
.cardSlot::before{
  content:"✦  TAP TO FLIP  ✦";
  position:absolute;
  top:6%;
  left:50%;
  transform:translateX(-50%);
  padding:8px 18px;

  font-size:12px;
  letter-spacing:.25em;
  font-weight:700;
  text-transform:uppercase;

  color:rgba(255,255,255,.95);
  text-align:center;
  white-space:nowrap;

  background:transparent;              /* ✅ removed gold fill */
  border-radius:999px;

  /* subtle “royal” outline + glow */
  border:1px solid rgba(212,175,55,.55);
  box-shadow:
    0 10px 25px rgba(0,0,0,.28),
    0 0 0 1px rgba(255,255,255,.10) inset,
    0 0 22px rgba(212,175,55,.22);

  text-shadow:
    0 1px 0 rgba(0,0,0,.25),
    0 0 14px rgba(212,175,55,.22);

  z-index:10;
  pointer-events:none;

  animation: royalPulseOutline 2.6s ease-in-out infinite;
}

@keyframes royalPulseOutline{
  0%,100%{
    transform:translateX(-50%) scale(1);
    opacity:.92;
    box-shadow:
      0 10px 25px rgba(0,0,0,.28),
      0 0 0 1px rgba(255,255,255,.10) inset,
      0 0 18px rgba(212,175,55,.18);
  }
  50%{
    transform:translateX(-50%) scale(1.05);
    opacity:1;
    box-shadow:
      0 14px 32px rgba(0,0,0,.34),
      0 0 0 1px rgba(255,255,255,.12) inset,
      0 0 30px rgba(212,175,55,.28);
  }
}

}

/* Hide indicator after flip */
.flipCard.isFlipped ~ * .cardSlot::before,
.flipCard.isFlipped .cardSlot::before{
  opacity:0;
}

/* SCROLL FOR MORE (moved lower) */
.cardSlot::after{
  content:"SCROLL FOR MORE";
  position:absolute;
  bottom:1.2%;              /* ✅ lower (was ~5%) */
  left:50%;
  transform:translateX(-50%);
  font-size:11px;
  letter-spacing:.3em;
  font-weight:600;
  color:rgba(255,255,255,.82);
  text-align:center;

  padding-top:22px;         /* space for the indicator line */
  pointer-events:none;
  z-index:10;

  animation: scrollFloat 2.4s ease-in-out infinite;

  /* little “line” above the text */
  background:
    linear-gradient(transparent,transparent),
    linear-gradient(to bottom,
      rgba(255,255,255,.85) 0%,
      rgba(255,255,255,.35) 100%);
  background-repeat:no-repeat;
  background-size: 0 0, 2px 18px;
  background-position:center top;

  text-shadow: 0 1px 10px rgba(0,0,0,.35);
}

@keyframes scrollFloat{
  0%,100%{ transform:translate(-50%,0); opacity:.85; }
  50%{ transform:translate(-50%,6px); opacity:1; }
}

/* Decorative animated arrows */
.cardSlot::after{
  background:
    linear-gradient(transparent,transparent),
    linear-gradient(
      to bottom,
      rgba(255,255,255,.9) 0%,
      rgba(255,255,255,.4) 100%
    );
  background-repeat:no-repeat;
  background-size: 0 0, 2px 18px;
  background-position:center top;
}

/* ===============================
   Animations
   =============================== */

@keyframes royalPulse{
  0%,100%{
    transform:translateX(-50%) scale(1);
    box-shadow:
      0 10px 25px rgba(0,0,0,.35),
      0 0 0 1px rgba(212,175,55,.6) inset,
      0 0 18px rgba(212,175,55,.35);
  }
  50%{
    transform:translateX(-50%) scale(1.05);
    box-shadow:
      0 14px 32px rgba(0,0,0,.45),
      0 0 0 1px rgba(212,175,55,.7) inset,
      0 0 32px rgba(212,175,55,.55);
  }
}

@keyframes scrollFloat{
  0%,100%{
    transform:translate(-50%,0);
    opacity:.85;
  }
  50%{
    transform:translate(-50%,6px);
    opacity:1;
  }
}
